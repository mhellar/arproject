<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Markerless Alpha Video</title>

  <!-- We've included a slightly modified version of A-Frame, which fixes some polish concerns -->
  <script src="//cdn.8thwall.com/web/aframe/8frame-0.8.2.min.js"></script>
  <script src="//cdn.8thwall.com/web/aframe/aframe-animation-component-5.1.2.min.js"></script>
  <script src="https://unpkg.com/aframe-chromakey-material/dist/aframe-chromakey-material.min.js"></script>

  <!-- XR Extras - provides utilities like load screen, almost there, and error handling.
         See github.com/8thwall/web/xrextras -->
  <script defer src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>

  <!-- 8thWall Web - Replace the app key here with your own app key -->
  <script async
    src="//apps.8thwall.com/xrweb?appKey=3sHnQ4OXZQFe96a2ellw14qGtnFFyZqiEIfH1IbAzm3Cg8uwFWqLgxuw9xPFaafvFyLPhw"></script>

  <script>
    // Component that places trees where the ground is clicked
    AFRAME.registerComponent('video', {
      
      init: function () {
        let count = 0;
          // Create new entity for the new object
          const newElement = document.createElement('a-entity')

          newElement.setAttribute('visible', 'false')

          newElement.setAttribute('scale', '5 5 5')

          // newElement.setAttribute('geometry', 'primitive:plane;width:2;height:2')
          newElement.setAttribute('material', 'side:double;')

          newElement.setAttribute('xrextras-play-video', 'video: #jelly-video; thumb: #jelly-thumb; canstop: false')
          // newElement.setAttribute('material', 'shader: chromakey; src: #jelly-video; color: 0.1 0.9 0.2')
          newElement.setAttribute('geometry', 'primitive: box;')

          const video = document.getElementById("jelly-video")
          this.el.sceneEl.appendChild(newElement)
          // Once the model is loaded, we are ready to show it popping in using an animation
          newElement.setAttribute('visible', 'true')
          video.play();

      }
    })



  </script>
</head>

<body>
  <!-- We must add the tap-place component to the scene so it has an effect -->
  <a-scene xrweb xrextras-almost-there xrextras-loading xrextras-runtime-error>

    <!-- We can define assets here to be loaded when A-Frame initializes -->
    <a-assets>

      <video id="jelly-video" autoplay muted playsinline crossorigin="anonymous" loop="true" src="ar1.mp4">
      </video>
    </a-assets>

    <!-- The raycaster will emit mouse events on scene objects specified with the cantap class -->
    <a-camera position="0 8 0" raycaster="objects: .cantap" cursor="
          fuse: false;
          rayOrigin: mouse;"
          video>
    </a-camera>

    <a-entity light="type: directional;
               intensity: 0.8;" position="1 4.3 2.5">
    </a-entity>

    <a-light type="ambient" intensity="1"></a-light>

  </a-scene>
</body>

</html>